{"filter":false,"title":"map.js","tooltip":"/client/map.js","ace":{"folds":[],"scrolltop":420,"scrollleft":0,"selection":{"start":{"row":46,"column":12},"end":{"row":46,"column":12},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"hash":"7503910e204ce645aec75f40b77af52fe008a133","changed":true,"value":"var Firebase = require(\"firebase\");\nvar myRef= new Firebase(\"https://progetto-reti.firebaseio.com/\");\nvar luoghi=new Array;\nconsole.log(\"iniziato\");\nvar i=0;\n/*\n    myRef.child('offerte')\n    .once('value', function(snap){\n          console.log(\"prova1\");\n  \t    snap.forEach(function(childsnap){\n  \t     console.log(\"prova2\");\n  \t     var data = childsnap.exportVal();\n  \t     console.log(data.citta);\n  \t     luoghi[i]=data.citta;\n  \t      console.log(luoghi[i]);\n  \t  \n  \t     i++;\n  \t    });\n    });\n */\n\n  \n  \n  \nfunction initMap() {\n    myRef.child('offerte')\n    .once('value', function(snap){\n          console.log(\"prova1\");\n  \t    snap.forEach(function(childsnap){\n  \t     console.log(\"prova2\");\n  \t     var data = childsnap.exportVal();\n  \t     console.log(data.citta);\n  \t     luoghi[i]=data.citta;\n  \t      console.log(luoghi[i]);\n  \t  \n  \t     i++;\n  \t    });\n    });\n    /*var map = new google.maps.Map(document.getElementById('map'), {\n    center: {lat: 0, lng: 0},\n    zoom: 3,\n    styles: [{\n      featureType: 'poi',\n      stylers: [{ visibility: 'off' }]  // Turn off points of interest.\n    }, {\n      featureType: 'transit.station',\n      stylers: [{ visibility: 'off' }]  // Turn off bus stations, train stations, etc.\n    }],\n    disableDoubleClickZoom: true\n  });*/\n        var map = new google.maps.Map(document.getElementById('map'), {\n          zoom: 8,\n          center: {lat: 41.9027835, lng: 12.4963655}\n        });\n        var geocoder = new google.maps.Geocoder();\n        \n\n        document.getElementById('submit').addEventListener('click', function() {\n            for(i=0;i<luoghi.length;i++){\n                geocodeAddress(geocoder,map, luoghi[i]);\n            }\n  \t        geocodeAddress(geocoder, map, \"roma\");\n  \t        geocodeAddress(geocoder, map, \"latina\");\n  \t        geocodeAddress(geocoder, map, \"napoli\");\n  \t        geocodeAddress(geocoder, map, \"trento\");\n  \t        \n  \t        \n        });\n        \n      }\n\nfunction geocodeAddress(geocoder, resultsMap,address) {\n        \n        //var address = document.getElementById('address').value;\n        geocoder.geocode({'address':address }, function(results, status) {\n          if (status === google.maps.GeocoderStatus.OK) {\n            resultsMap.setCenter(results[0].geometry.location);\n            \n            var contentString = '<div id=\"content\">'+\n              '<div id=\"siteNotice\">'+\n              '</div>'+\n              '<h1 id=\"firstHeading\" class=\"firstHeading\">Mitra</h1>'+\n              '<div id=\"bodyContent\">'+\n              '<p><b>Job</b></p>'+\n              '<p>Attribution: Roma, Link all annuncio : <a href=\"https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194\">'+\n              'https://en.wikipedia.org/w/index.php?title=Uluru</a> '+\n              '(last visited June 22, 2009).</p>'+\n              '</div>'+\n              '</div>';\n\n            var infowindow = new google.maps.InfoWindow({\n              content: contentString\n            });\n            \n            var marker = new google.maps.Marker({\n              map: resultsMap,\n              position: results[0].geometry.location,\n              title: 'Work for Andrea'\n            });\n            \n            marker.addListener('click', function() {\n              infowindow.open(resultsMap, marker);\n            });\n            \n          } else {\n            alert('Geocode was not successful for the following reason: ' + status);\n          }\n        });\n  \t     \n        \n}","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":46,"column":24},"end":{"row":46,"column":25},"action":"insert","lines":["d"],"id":1204}],[{"start":{"row":46,"column":25},"end":{"row":46,"column":26},"action":"insert","lines":["e"],"id":1205}],[{"start":{"row":46,"column":26},"end":{"row":46,"column":27},"action":"insert","lines":["d"],"id":1206}],[{"start":{"row":46,"column":22},"end":{"row":46,"column":23},"action":"remove","lines":["A"],"id":1207}],[{"start":{"row":46,"column":22},"end":{"row":46,"column":23},"action":"insert","lines":["_"],"id":1208}],[{"start":{"row":46,"column":23},"end":{"row":46,"column":24},"action":"insert","lines":["a"],"id":1209}],[{"start":{"row":46,"column":44},"end":{"row":46,"column":45},"action":"insert","lines":[","],"id":1210}],[{"start":{"row":46,"column":45},"end":{"row":46,"column":46},"action":"insert","lines":["p"],"id":1211}],[{"start":{"row":46,"column":46},"end":{"row":46,"column":47},"action":"insert","lines":["r"],"id":1212}],[{"start":{"row":46,"column":47},"end":{"row":46,"column":48},"action":"insert","lines":["e"],"id":1213}],[{"start":{"row":46,"column":48},"end":{"row":46,"column":49},"action":"insert","lines":["c"],"id":1214}],[{"start":{"row":45,"column":12},"end":{"row":58,"column":7},"action":"remove","lines":["myRef.child('offerte')","            .on('child_added', function(snap,prec){","             console.log(\"prova1\");","  \t         snap.forEach(function(childsnap){","  \t             console.log(\"prova2\");","  \t              var data = childsnap.exportVal();","  \t     console.log(data.citta);","  \t     var indirizzo=data.citta;","  \t     geocodeAddress(geocoder,map,indirizzo);","  \t      ","  \t  ","  \t     i++;","  \t    });","    });"],"id":1215,"ignore":true}],[{"start":{"row":44,"column":8},"end":{"row":44,"column":10},"action":"insert","lines":["//"],"id":1216,"ignore":true}],[{"start":{"row":44,"column":8},"end":{"row":44,"column":10},"action":"remove","lines":["//"],"id":1217,"ignore":true}],[{"start":{"row":5,"column":0},"end":{"row":5,"column":2},"action":"insert","lines":["/*"],"id":1218,"ignore":true},{"start":{"row":19,"column":1},"end":{"row":19,"column":3},"action":"insert","lines":["*/"]}],[{"start":{"row":44,"column":8},"end":{"row":44,"column":10},"action":"insert","lines":["//"],"id":1219,"ignore":true}],[{"start":{"row":44,"column":8},"end":{"row":44,"column":10},"action":"remove","lines":["//"],"id":1220,"ignore":true}],[{"start":{"row":45,"column":12},"end":{"row":57,"column":7},"action":"insert","lines":["myRef.child('offerte')","    .once('value', function(snap){","          console.log(\"prova1\");","  \t    snap.forEach(function(childsnap){","  \t     console.log(\"prova2\");","  \t     var data = childsnap.exportVal();","  \t     console.log(data.citta);","  \t     luoghi[i]=data.citta;","  \t      console.log(luoghi[i]);","  \t  ","  \t     i++;","  \t    });","    });"],"id":1221,"ignore":true}],[{"start":{"row":46,"column":4},"end":{"row":46,"column":12},"action":"insert","lines":["        "],"id":1222,"ignore":true}],[{"start":{"row":47,"column":10},"end":{"row":47,"column":12},"action":"insert","lines":["  "],"id":1223,"ignore":true}],[{"start":{"row":47,"column":12},"end":{"row":47,"column":16},"action":"insert","lines":["    "],"id":1224,"ignore":true}],[{"start":{"row":48,"column":7},"end":{"row":48,"column":11},"action":"insert","lines":["    "],"id":1225,"ignore":true}],[{"start":{"row":48,"column":11},"end":{"row":48,"column":15},"action":"insert","lines":["    "],"id":1226,"ignore":true}],[{"start":{"row":48,"column":15},"end":{"row":48,"column":19},"action":"insert","lines":["    "],"id":1227,"ignore":true}],[{"start":{"row":48,"column":18},"end":{"row":48,"column":19},"action":"remove","lines":[" "],"id":1228,"ignore":true}],[{"start":{"row":48,"column":17},"end":{"row":48,"column":18},"action":"remove","lines":[" "],"id":1229,"ignore":true}],[{"start":{"row":48,"column":12},"end":{"row":48,"column":17},"action":"remove","lines":["     "],"id":1230,"ignore":true}],[{"start":{"row":48,"column":12},"end":{"row":48,"column":15},"action":"insert","lines":["   "],"id":1231,"ignore":true}],[{"start":{"row":49,"column":8},"end":{"row":49,"column":15},"action":"insert","lines":["       "],"id":1232,"ignore":true}],[{"start":{"row":50,"column":8},"end":{"row":50,"column":11},"action":"insert","lines":["   "],"id":1233,"ignore":true}],[{"start":{"row":50,"column":11},"end":{"row":50,"column":15},"action":"insert","lines":["    "],"id":1234,"ignore":true}],[{"start":{"row":51,"column":8},"end":{"row":51,"column":15},"action":"insert","lines":["       "],"id":1235,"ignore":true}],[{"start":{"row":52,"column":8},"end":{"row":52,"column":15},"action":"insert","lines":["       "],"id":1236,"ignore":true}],[{"start":{"row":53,"column":9},"end":{"row":53,"column":15},"action":"insert","lines":["      "],"id":1237,"ignore":true}],[{"start":{"row":51,"column":15},"end":{"row":55,"column":12},"action":"remove","lines":["console.log(data.citta);","  \t            luoghi[i]=data.citta;","  \t            console.log(luoghi[i]);","  \t  ","  \t     i++;"],"id":1238,"ignore":true}],[{"start":{"row":51,"column":15},"end":{"row":84,"column":11},"action":"insert","lines":["geocoder.geocode({'address':address }, function(results, status) {","          if (status === google.maps.GeocoderStatus.OK) {","            resultsMap.setCenter(results[0].geometry.location);","            ","            var contentString = '<div id=\"content\">'+","              '<div id=\"siteNotice\">'+","              '</div>'+","              '<h1 id=\"firstHeading\" class=\"firstHeading\">Mitra</h1>'+","              '<div id=\"bodyContent\">'+","              '<p><b>Job</b></p>'+","              '<p>Attribution: Roma, Link all annuncio : <a href=\"https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194\">'+","              'https://en.wikipedia.org/w/index.php?title=Uluru</a> '+","              '(last visited June 22, 2009).</p>'+","              '</div>'+","              '</div>';","","            var infowindow = new google.maps.InfoWindow({","              content: contentString","            });","            ","            var marker = new google.maps.Marker({","              map: resultsMap,","              position: results[0].geometry.location,","              title: 'Work for Andrea'","            });","            ","            marker.addListener('click', function() {","              infowindow.open(resultsMap, marker);","            });","            ","          } else {","            alert('Geocode was not successful for the following reason: ' + status);","          }","        });"],"id":1239,"ignore":true}],[{"start":{"row":51,"column":43},"end":{"row":51,"column":50},"action":"remove","lines":["address"],"id":1240,"ignore":true},{"start":{"row":51,"column":43},"end":{"row":51,"column":53},"action":"insert","lines":["data.citta"]}],[{"start":{"row":45,"column":12},"end":{"row":86,"column":7},"action":"remove","lines":["myRef.child('offerte')","            .once('value', function(snap){","                console.log(\"prova1\");","  \t            snap.forEach(function(childsnap){","  \t            console.log(\"prova2\");","  \t            var data = childsnap.exportVal();","  \t            geocoder.geocode({'address':data.citta }, function(results, status) {","          if (status === google.maps.GeocoderStatus.OK) {","            resultsMap.setCenter(results[0].geometry.location);","            ","            var contentString = '<div id=\"content\">'+","              '<div id=\"siteNotice\">'+","              '</div>'+","              '<h1 id=\"firstHeading\" class=\"firstHeading\">Mitra</h1>'+","              '<div id=\"bodyContent\">'+","              '<p><b>Job</b></p>'+","              '<p>Attribution: Roma, Link all annuncio : <a href=\"https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194\">'+","              'https://en.wikipedia.org/w/index.php?title=Uluru</a> '+","              '(last visited June 22, 2009).</p>'+","              '</div>'+","              '</div>';","","            var infowindow = new google.maps.InfoWindow({","              content: contentString","            });","            ","            var marker = new google.maps.Marker({","              map: resultsMap,","              position: results[0].geometry.location,","              title: 'Work for Andrea'","            });","            ","            marker.addListener('click', function() {","              infowindow.open(resultsMap, marker);","            });","            ","          } else {","            alert('Geocode was not successful for the following reason: ' + status);","          }","        });","  \t    });","    });"],"id":1241,"ignore":true}],[{"start":{"row":24,"column":20},"end":{"row":25,"column":4},"action":"insert","lines":["","    "],"id":1242,"ignore":true}],[{"start":{"row":25,"column":4},"end":{"row":37,"column":7},"action":"insert","lines":["myRef.child('offerte')","    .once('value', function(snap){","          console.log(\"prova1\");","  \t    snap.forEach(function(childsnap){","  \t     console.log(\"prova2\");","  \t     var data = childsnap.exportVal();","  \t     console.log(data.citta);","  \t     luoghi[i]=data.citta;","  \t      console.log(luoghi[i]);","  \t  ","  \t     i++;","  \t    });","    });"],"id":1243,"ignore":true}],[{"start":{"row":58,"column":12},"end":{"row":58,"column":15},"action":"insert","lines":["for"],"id":1244,"ignore":true}],[{"start":{"row":58,"column":15},"end":{"row":58,"column":17},"action":"insert","lines":["()"],"id":1245,"ignore":true}],[{"start":{"row":58,"column":16},"end":{"row":58,"column":18},"action":"insert","lines":["i="],"id":1246,"ignore":true}],[{"start":{"row":58,"column":18},"end":{"row":58,"column":20},"action":"insert","lines":["0;"],"id":1247,"ignore":true}],[{"start":{"row":58,"column":20},"end":{"row":58,"column":21},"action":"insert","lines":["i"],"id":1248,"ignore":true}],[{"start":{"row":58,"column":21},"end":{"row":58,"column":22},"action":"insert","lines":["<"],"id":1249,"ignore":true}],[{"start":{"row":58,"column":22},"end":{"row":58,"column":24},"action":"insert","lines":["lu"],"id":1250,"ignore":true}],[{"start":{"row":58,"column":24},"end":{"row":58,"column":25},"action":"insert","lines":["o"],"id":1251,"ignore":true}],[{"start":{"row":58,"column":25},"end":{"row":58,"column":28},"action":"insert","lines":["ghi"],"id":1252,"ignore":true}],[{"start":{"row":58,"column":28},"end":{"row":58,"column":29},"action":"insert","lines":["."],"id":1253,"ignore":true}],[{"start":{"row":58,"column":29},"end":{"row":58,"column":32},"action":"insert","lines":["len"],"id":1254,"ignore":true}],[{"start":{"row":58,"column":32},"end":{"row":58,"column":34},"action":"insert","lines":["gh"],"id":1255,"ignore":true}],[{"start":{"row":58,"column":34},"end":{"row":58,"column":35},"action":"insert","lines":["t"],"id":1256,"ignore":true}],[{"start":{"row":58,"column":33},"end":{"row":58,"column":35},"action":"remove","lines":["ht"],"id":1257,"ignore":true}],[{"start":{"row":58,"column":33},"end":{"row":58,"column":35},"action":"insert","lines":["th"],"id":1258,"ignore":true}],[{"start":{"row":58,"column":35},"end":{"row":58,"column":37},"action":"insert","lines":[";i"],"id":1259,"ignore":true}],[{"start":{"row":58,"column":37},"end":{"row":58,"column":39},"action":"insert","lines":["++"],"id":1260,"ignore":true}],[{"start":{"row":58,"column":40},"end":{"row":60,"column":13},"action":"insert","lines":["{","                ","            }"],"id":1261,"ignore":true}],[{"start":{"row":59,"column":16},"end":{"row":59,"column":20},"action":"insert","lines":["geod"],"id":1262,"ignore":true}],[{"start":{"row":59,"column":20},"end":{"row":59,"column":23},"action":"insert","lines":["eco"],"id":1263,"ignore":true}],[{"start":{"row":59,"column":23},"end":{"row":59,"column":25},"action":"insert","lines":["de"],"id":1264,"ignore":true}],[{"start":{"row":59,"column":22},"end":{"row":59,"column":25},"action":"remove","lines":["ode"],"id":1265,"ignore":true}],[{"start":{"row":59,"column":19},"end":{"row":59,"column":22},"action":"remove","lines":["dec"],"id":1266,"ignore":true},{"start":{"row":59,"column":19},"end":{"row":59,"column":20},"action":"insert","lines":["c"]}],[{"start":{"row":59,"column":20},"end":{"row":59,"column":21},"action":"insert","lines":["o"],"id":1267,"ignore":true}],[{"start":{"row":59,"column":21},"end":{"row":59,"column":23},"action":"insert","lines":["de"],"id":1268,"ignore":true}],[{"start":{"row":59,"column":16},"end":{"row":59,"column":23},"action":"remove","lines":["geocode"],"id":1269,"ignore":true},{"start":{"row":59,"column":16},"end":{"row":59,"column":32},"action":"insert","lines":["geocodeAddress()"]}],[{"start":{"row":59,"column":31},"end":{"row":59,"column":32},"action":"insert","lines":["a"],"id":1270,"ignore":true}],[{"start":{"row":59,"column":31},"end":{"row":59,"column":32},"action":"remove","lines":["a"],"id":1271,"ignore":true}],[{"start":{"row":59,"column":31},"end":{"row":59,"column":34},"action":"insert","lines":["feo"],"id":1272,"ignore":true}],[{"start":{"row":59,"column":34},"end":{"row":59,"column":35},"action":"insert","lines":["c"],"id":1273,"ignore":true}],[{"start":{"row":59,"column":35},"end":{"row":59,"column":37},"action":"insert","lines":["de"],"id":1274,"ignore":true}],[{"start":{"row":59,"column":37},"end":{"row":59,"column":38},"action":"insert","lines":["r"],"id":1275,"ignore":true}],[{"start":{"row":59,"column":33},"end":{"row":59,"column":38},"action":"remove","lines":["ocder"],"id":1276,"ignore":true}],[{"start":{"row":59,"column":31},"end":{"row":59,"column":33},"action":"remove","lines":["fe"],"id":1277,"ignore":true}],[{"start":{"row":59,"column":31},"end":{"row":59,"column":34},"action":"insert","lines":["geo"],"id":1278,"ignore":true}],[{"start":{"row":59,"column":34},"end":{"row":59,"column":37},"action":"insert","lines":["cod"],"id":1279,"ignore":true}],[{"start":{"row":59,"column":37},"end":{"row":59,"column":39},"action":"insert","lines":["er"],"id":1280,"ignore":true}],[{"start":{"row":59,"column":39},"end":{"row":59,"column":40},"action":"insert","lines":[","],"id":1281,"ignore":true}],[{"start":{"row":59,"column":40},"end":{"row":59,"column":43},"action":"insert","lines":["reu"],"id":1282,"ignore":true}],[{"start":{"row":59,"column":42},"end":{"row":59,"column":43},"action":"remove","lines":["u"],"id":1283,"ignore":true},{"start":{"row":59,"column":42},"end":{"row":59,"column":44},"action":"insert","lines":["su"]}],[{"start":{"row":59,"column":44},"end":{"row":59,"column":46},"action":"insert","lines":["lt"],"id":1284,"ignore":true}],[{"start":{"row":59,"column":46},"end":{"row":59,"column":47},"action":"insert","lines":["s"],"id":1285,"ignore":true}],[{"start":{"row":59,"column":47},"end":{"row":59,"column":48},"action":"insert","lines":["M"],"id":1286,"ignore":true}],[{"start":{"row":59,"column":48},"end":{"row":59,"column":49},"action":"insert","lines":["a"],"id":1287,"ignore":true}],[{"start":{"row":59,"column":49},"end":{"row":59,"column":50},"action":"insert","lines":["p"],"id":1288,"ignore":true}],[{"start":{"row":59,"column":50},"end":{"row":59,"column":52},"action":"insert","lines":[", "],"id":1289,"ignore":true}],[{"start":{"row":59,"column":50},"end":{"row":59,"column":52},"action":"remove","lines":[", "],"id":1290,"ignore":true}],[{"start":{"row":59,"column":44},"end":{"row":59,"column":50},"action":"remove","lines":["ltsMap"],"id":1291,"ignore":true}],[{"start":{"row":59,"column":41},"end":{"row":59,"column":44},"action":"remove","lines":["esu"],"id":1292,"ignore":true}],[{"start":{"row":59,"column":40},"end":{"row":59,"column":41},"action":"remove","lines":["r"],"id":1293,"ignore":true}],[{"start":{"row":59,"column":40},"end":{"row":59,"column":43},"action":"insert","lines":["map"],"id":1294,"ignore":true}],[{"start":{"row":59,"column":43},"end":{"row":59,"column":45},"action":"insert","lines":[", "],"id":1295,"ignore":true}],[{"start":{"row":59,"column":45},"end":{"row":59,"column":48},"action":"insert","lines":["luo"],"id":1296,"ignore":true}],[{"start":{"row":59,"column":48},"end":{"row":59,"column":51},"action":"insert","lines":["ghi"],"id":1297,"ignore":true}],[{"start":{"row":59,"column":51},"end":{"row":59,"column":53},"action":"insert","lines":["[]"],"id":1298,"ignore":true}],[{"start":{"row":59,"column":52},"end":{"row":59,"column":53},"action":"insert","lines":["i"],"id":1299,"ignore":true}],[{"start":{"row":59,"column":55},"end":{"row":59,"column":56},"action":"insert","lines":[";"],"id":1300,"ignore":true}],[{"start":{"row":25,"column":4},"end":{"row":37,"column":7},"action":"remove","lines":["myRef.child('offerte')","    .once('value', function(snap){","          console.log(\"prova1\");","  \t    snap.forEach(function(childsnap){","  \t     console.log(\"prova2\");","  \t     var data = childsnap.exportVal();","  \t     console.log(data.citta);","  \t     luoghi[i]=data.citta;","  \t      console.log(luoghi[i]);","  \t  ","  \t     i++;","  \t    });","    });"],"id":1301,"ignore":true}],[{"start":{"row":25,"column":4},"end":{"row":37,"column":7},"action":"insert","lines":["myRef.child('offerte')","    .once('value', function(snap){","          console.log(\"prova1\");","  \t    snap.forEach(function(childsnap){","  \t     console.log(\"prova2\");","  \t     var data = childsnap.exportVal();","  \t     console.log(data.citta);","  \t     luoghi[i]=data.citta;","  \t      console.log(luoghi[i]);","  \t  ","  \t     i++;","  \t    });","    });"],"id":1302,"ignore":true}],[{"start":{"row":25,"column":4},"end":{"row":37,"column":7},"action":"remove","lines":["myRef.child('offerte')","    .once('value', function(snap){","          console.log(\"prova1\");","  \t    snap.forEach(function(childsnap){","  \t     console.log(\"prova2\");","  \t     var data = childsnap.exportVal();","  \t     console.log(data.citta);","  \t     luoghi[i]=data.citta;","  \t      console.log(luoghi[i]);","  \t  ","  \t     i++;","  \t    });","    });"],"id":1303,"ignore":true}],[{"start":{"row":46,"column":12},"end":{"row":48,"column":13},"action":"remove","lines":["for(i=0;i<luoghi.length;i++){","                geocodeAddress(geocoder,map, luoghi[i]);","            }"],"id":1304,"ignore":true}]]},"timestamp":1458928430000}